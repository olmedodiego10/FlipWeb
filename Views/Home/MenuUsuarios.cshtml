@model FlipWeb.Models.MenuUsuariosViewModel
@Styles.Render("~/Content/FlipStyleSheet.css")
@{
    ViewBag.Title = "ListadoOfertas";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script type="text/javascript" src="~/Scripts/FlipJS.js"></script>


<div>
    @{
        List<SelectListItem> tiposDeOferta = new List<SelectListItem>();
        tiposDeOferta.Add(new SelectListItem
        {
            Text = "Todas",
            Value = "todasLasOfertas"

        });
        tiposDeOferta.Add(new SelectListItem
        {
            Text = "Oferta de carga",
            Value = "ofertaCarga"

        });
        tiposDeOferta.Add(new SelectListItem
        {
            Text = "Oferta de transporte",
            Value = "ofertaTransporte"

        });
    }
    @{
        List<SelectListItem> listItems = new List<SelectListItem>();
        listItems.Add(new SelectListItem
        {
            Text = "Seleccionar pais",
            Value = "",
            Selected = true
        });
        listItems.Add(new SelectListItem
        {
            Text = "Uruguay",
            Value = "Uruguay",

        });
        listItems.Add(new SelectListItem
        {
            Text = "Argentina",
            Value = "Argentina"
        });
        listItems.Add(new SelectListItem
        {
            Text = "Brasil",
            Value = "Brasil"
        });
        listItems.Add(new SelectListItem
        {
            Text = "Chile",
            Value = "Chile"
        });
        listItems.Add(new SelectListItem
        {
            Text = "Paraguay",
            Value = "Paraguay"
        });

    }
    <h2>Menu</h2>

    <p class="text-danger" style="max-width:500px">@TempData["errorBusqueda"]</p>
    <p class="text-danger" style="max-width:500px">@TempData["errorFiltros"]</p>

    <div class="row">
        <section class="col-md-6">
            <h5>Busqueda oferta</h5>
            @using (Html.BeginForm("BusquedaRapidaOferta", "Home", FormMethod.Post))
            {
                @Html.TextBox("idOferta", "", new { @placeholder = "Id", @class = "form-control" })
                <button type="submit" class="btn btn-success">Busqueda rapida</button>
            }
        </section>
        <section class="col-md-6  text-md-right ">
            <input type="button" class="btn btn-light btn-lg font-weight-bolder " onclick="busquedaAvanzada()" value="Busqueda Avanzada" />
        </section>
    </div>

    
    <div id="divBusquedaAvanzada" style="display:none">
  
        @using (Html.BeginForm("BusquedaOfertaConFiltros", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {

            <h3>Busqueda avanzada</h3>
            <div class=" form-inline align-items-start">
                <div class="mr-3">
                    <h5>Tipo de oferta</h5>
                    <hr />
                    @Html.LabelFor(model => model.TipoOferta, htmlAttributes: new { @class = "control-label" })
                    @Html.DropDownListFor(model => model.TipoOferta, tiposDeOferta, htmlAttributes: new { @class = "form-control" })
                </div>
                <div class="mr-3 text-center">
                    <h5>Origen</h5>
                    <hr />
                    @Html.LabelFor(model => model.PaisPartida, htmlAttributes: new { @class = "control-label " })
                    @Html.DropDownListFor(model => model.PaisPartida, listItems, htmlAttributes: new { @class = "form-control" })
                    @Html.LabelFor(model => model.CiudadPartida, htmlAttributes: new { @class = "control-label" })
                    @Html.EditorFor(model => model.CiudadPartida, new { htmlAttributes = new { @class = "form-control" } })
                </div>
                <div class="mr-3 text-center">
                    <h5>Destino</h5>
                    <hr />
                    @Html.LabelFor(model => model.PaisDestino, htmlAttributes: new { @class = "control-label" })
                    @Html.DropDownListFor(model => model.PaisDestino, listItems, htmlAttributes: new { @class = "form-control" })
                    @Html.LabelFor(model => model.CiudadDestino, htmlAttributes: new { @class = "control-label" })
                    @Html.EditorFor(model => model.CiudadDestino, new { htmlAttributes = new { @class = "form-control" } })
                </div>
                <div class="mr-3">
                    <h5>Fechas</h5>
                    <hr />
                    @Html.LabelFor(model => model.FechaDesde, htmlAttributes: new { @class = "control-label" })
                    @Html.EditorFor(model => model.FechaDesde, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.LabelFor(model => model.FechaHasta, htmlAttributes: new { @class = "control-label" })
                    @Html.EditorFor(model => model.FechaHasta, new { htmlAttributes = new { @class = "form-control" } })

                </div>
                <div>
                    <h5>Camion</h5>
                    <hr />
                    @Html.LabelFor(model => model.TipoCamion, htmlAttributes: new { @class = "control-label" })
                    @Html.EditorFor(model => model.TipoCamion, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.LabelFor(model => model.TipoCaja, htmlAttributes: new { @class = "control-label" })
                    @Html.EditorFor(model => model.TipoCaja, new { htmlAttributes = new { @class = "form-control" } })
                </div>
            </div>
            <div class="form-inline">
                <button type="submit" class="btn btn-success">Buscar</button>
            </div>

        }
    </div>
    <hr />
    <h3>Ofertas de Carga</h3>
    <div style="overflow-x:auto;">
        <table class="table table-hover">
            <tr>
                <th>
                    Imagen ilustrativa
                </th>
                <th>
                    Codigo de oferta
                </th>
                <th>
                    País de partida
                </th>
                <th>
                    Ciudad de partida
                </th>
                <th>
                    País de destino
                </th>
                <th>
                    Ciudad de destino
                </th>
                <th>
                    Fecha de oferta
                </th>
                <th>
                    Requiere exclusividad
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.ListadoOfertasCarga)
            {
        <tr>
            <td>
                <img class="rounded border border-success" width="120" src="@Url.Action("getImageOfertaCarga","Home", new { id= item.OfertaId})" />
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OfertaId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PaisPartida)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CiudadPartida)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PaisDestino)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CiudadDestino)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FechaOferta)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RequiereExclusividad)
            </td>
            <td>
                @Html.ActionLink("Detalles", "DetailsOfertaCargaUser", "Home", new { id = item.OfertaId }, htmlAttributes: new { @class = "btn btn-success", @role = "button" })
            </td>
        </tr>
            }

        </table>
    </div>
    <h3>Ofertas de Transporte</h3>
    <div style="overflow-x:auto;">
        <table class="table table-hover">
            <tr>
                <th>
                    Imagen ilustrativa
                </th>
                <th>
                    Codigo de oferta
                </th>
                <th>
                    País de partida
                </th>
                <th>
                    Ciudad de partida
                </th>
                <th>
                    País de destino
                </th>
                <th>
                    Ciudad de destino
                </th>
                <th>
                    Fecha de oferta
                </th>
                <th>
                    Tipo de caja
                </th>
                <th>
                    Tipo de camión
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.ListadoOfertasTransporte)
            {
        <tr>
            <td>
                <img class="rounded border border-success" width="120" src="@Url.Action("getImageOfertaTransporte","Home", new { id= item.OfertaId})" />
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.OfertaId)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PaisPartida)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CiudadPartida)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PaisDestino)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CiudadDestino)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FechaOferta)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TipoCaja)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TipoCamion)
            </td>
            <td>
                @Html.ActionLink("Detalles", "DetailsOfertaTransporteUser", "Home", new { id = item.OfertaId }, htmlAttributes: new { @class = "btn btn-success", @role = "button" })
            </td>
        </tr>
            }

        </table>
    </div>
    <div class="row">
        @Html.ActionLink("Crear Oferta de Carga", "CreateOfertaCarga", "Home", routeValues: null, htmlAttributes: new { @class = "btn btn-success col-md-4 col-sm-12 col-xs-12", @role = "button" })
        @Html.ActionLink("Crear Oferta de Transporte", "CreateOfertaTransporte", "Home", routeValues: null, htmlAttributes: new { @class = "btn btn-success col-md-4 col-sm-12 col-xs-12", @role = "button" })
        @Html.ActionLink("Mis Ofertas activas*", "Action", "Controller", routeValues: null, htmlAttributes: new { @class = "btn btn-success col-md-4 col-sm-12 col-xs-12", @role = "button" })
        @Html.ActionLink("Contactados", "ContactadosList", "Home", routeValues: null, htmlAttributes: new { @class = "btn btn-success col-md-4 col-sm-12 col-xs-12", @role = "button" })
        @Html.ActionLink("Historial de Ofertas creadas*", "Action", "Controller", routeValues: null, htmlAttributes: new { @class = "btn btn-success col-md-4 col-sm-12 col-xs-12", @role = "button" })
        @Html.ActionLink("Administradores", "MenuAdmins", "Home", routeValues: null, htmlAttributes: new { @class = "btn btn-success btn-outline col-md-4 col-sm-12 col-xs-12", @role = "button" })
    </div>
</div>

